import{useStores as e,defineInterface as t}from"@directus/extensions-sdk";import{computed as a,ref as l,defineComponent as n,watch as i,resolveComponent as o,openBlock as r,createElementBlock as u,createVNode as s,unref as c,isRef as d}from"vue";const p={class:"wrapper-input"};var f=n({__name:"interface",props:{value:{default:{}},primaryKey:{},collection:{},field:{},disabled:{type:Boolean,default:!1},enableCreate:{type:Boolean,default:!0},enableSelect:{type:Boolean,default:!0},limit:{default:1},prefix:{default:""},allowDuplicates:{type:Boolean,default:!1}},emits:["input"],setup(t,{emit:n}){const f=t,m=n,v=l(!1),g=a((()=>f.value)),{fields:h}=function(t){const{useCollectionsStore:l,useFieldsStore:n}=e(),i=l(),o=a((()=>i.collections.map((e=>({text:e.collection,value:e.collection}))).filter((e=>!e.text.startsWith("directus_"))))),r=a((()=>[{field:"meta-group",type:"alias",name:a((()=>t.value)),meta:{field:"meta-group",special:["alias","no-data","group"],interface:"group-detail"}},{field:"name",name:"$t:name",type:"string",meta:{interface:"system-input-translated-string",options:{placeholder:"$t:preset_name_placeholder"},width:"half",group:"meta-group"}},{field:"collection",name:"$t:collection",type:"string",meta:{interface:"select-dropdown",options:{choices:o.value},width:"half",group:"meta-group"}},{field:"layout",name:"$t:layout",type:"string",meta:{interface:"input",width:"half",group:"meta-group"}},{field:"search",name:"$t:search",type:"string",meta:{interface:"input",width:"half",options:{placeholder:"$t:search_items"},group:"meta-group"}},{field:"filter",name:"$t:filter",type:"json",meta:{interface:"system-filter",group:"meta-group",options:{collectionField:"collection",rawFieldNames:!0}}}]));return{allowCollection:o,fields:r}}(a((()=>$.value.name))),{edits:y,hasEdits:b,initialValues:_,values:x,updateFilters:w,search:k}=function(e){const t=l({}),n=a((()=>Object.keys(t.value).length>0)),i=a((()=>null===e.value?{name:null,collection:null,layout:"",search:null,scope:"all",filter:null}:{name:e.value.name,collection:e.value.collection,layout:e.value.layout,search:e.value.search,filter:e.value.filter})),o=a((()=>({...i.value,...t.value}))),r=a({get:()=>o.value.search,set(e){t.value={...t.value,search:e}}});return{edits:t,initialValues:i,values:o,hasEdits:n,updateFilters:function(e){t.value={...t.value,filter:e}},search:r}}(g),$=a((()=>({...g.value,...y.value})));return i((()=>y.value),(e=>{console.log(e),m("input",$.value)})),(e,t)=>{const a=o("v-form");return r(),u("div",p,[s(a,{modelValue:c(y),"onUpdate:modelValue":t[0]||(t[0]=e=>d(y)?y.value=e:null),fields:c(h),loading:v.value,"initial-values":c(_),"primary-key":e.id},null,8,["modelValue","fields","loading","initial-values","primary-key"])])}}}),m=[],v=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,l=!0===t.prepend?"prepend":"append",n=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(n){var o=m.indexOf(i);-1===o&&(o=m.push(i)-1,v[o]={}),a=v[o]&&v[o][l]?v[o][l]:v[o][l]=r()}else a=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),n=0;n<a.length;n++)e.setAttribute(a[n],t.attributes[a[n]]);var o="prepend"===l?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.wrapper-input[data-v-e68115e9] {\n\tpadding: 20px;\n\tborder-radius: var(--theme--border-radius);\n\tbackground: var(--theme--navigation--background);\n}\n",{});const g=[t({id:"advanced-filters",name:"Advanced Filters",icon:"filter_alt",description:"",component:((e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a})(f,[["__scopeId","data-v-e68115e9"],["__file","interface.vue"]]),options:null,types:["json","text"]})],h=[],y=[],b=[],_=[],x=[],w=[];export{h as displays,g as interfaces,y as layouts,b as modules,w as operations,_ as panels,x as themes};
